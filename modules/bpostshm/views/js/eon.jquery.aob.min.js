/**
 * eon.jquery.aob ~ Version 1.65.2
 * @author    Serge Jamasb
 * @copyright the author
 * @license  MIT/GPL
 */
!function(e,t){"undefined"!=typeof staob&&e(function(){function t(){window.location.replace(staob.urls.reload)}function o(o){var n='<ul class="eonbox-err">';e.each(o,function(t,o){n+="<h4>"+t+"</h4>",e.each(o,function(e,t){n+="<li>"+t+"</li>"})}),eonBox.displayError(n,function(){t()})}function n(t,n){var i=staob.debug.urls.getXml;0!=i.length&&e.get(i,{key:t,qr:n},function(e){void 0!==e.errors?o(e.errors):window.open(e,"newwindow","width=640,height=480")},"JSON")}var i=staob.titles.open,a=staob.titles.treated,r=e("table.order_bpost"),s=r.find("thead"),d=[];r.find("td.treated_col").each(function(t,o){var n=e(o);1==n.text().trim()&&d.push(n.closest("tr"))});var c=r.find("tbody tr:eq(0)"),l=c.children("td"),p=c.children("td.treated_col"),f=l.index(p);if(0==e("td.list-empty").length&&e("tr, colgroup","table.order_bpost").each(function(){e(this).children(":eq("+f+")").not(".list-empty").remove()}),d.length){var u=r.clone();if(u.find("thead").remove().end().find("tbody").empty(),e.each(d,function(e,t){u.append(t)}),staob.ps_version<1.6){var b=e("#adminordersbpost");b.prepend(e('<ul id="idTabs" />').append('<li><a href="#tab1">'+i+"</a></li>",'<li><a href="#tab2">'+a+"</a></li>"),e('<div id="tab1"/>').append(r),e('<div id="tab2"/>').append(u))}else{var b=e(".table-responsive");b.before(e('<ul id="idTabs" class="tab nav nav-tabs" />').append('<li class="tab-row active"><a href="#tab1">'+i+"</a></li>",'<li class="tab-row"><a href="#tab2">'+a+"</a></li>")),b.prepend(e('<div id="tab1" />').append(r),e('<div id="tab2" style="display: none;" />').append(u))}e("#idTabs").idTabs().find("a").on("click",function(){if(staob.ps_version>=1.6){e(this).parent().addClass("active").siblings().removeClass("active")}s.prependTo(".order_bpost:visible")}),void 0!==location.hash&&"#tab2"===location.hash&&e("#idTabs").find("li:eq(1) a").trigger("click")}if(e("select.actions").on("change",function(n){if(this.value){if(void 0!==e(this).children(":selected").data("target"))return window.open(this.value),void t();e.get(this.value,{},function(n){var i=void 0!==n.errors,a=void 0!==n.links;return i&&o(n.errors),a?(staob.fancy_pop&&eonBox.reset(),e.each(n.links,function(e,t){staob.fancy_pop?eonBox.addLink(t):window.open(t)}),void(staob.fancy_pop?eonBox.open("",function(){t()}):i||t())):i||a||!n?void 0:void t()},"JSON")}}).children(":disabled").on("click",function(){var t=e(this);t.data("disabled")&&eonBox.display(t.data("disabled"))}),e("img.print").on("click",function(n){n.preventDefault(),n.stopPropagation();var i=e(this);void 0!==i.data("labels")&&e.get(i.data("labels"),{},function(n){var i=void 0!==n.errors,a=void 0!==n.links;if(i&&o(n.errors),a)return staob.fancy_pop&&eonBox.reset(),e.each(n.links,function(e,t){staob.fancy_pop?eonBox.addLink(t):window.open(t)}),void(staob.fancy_pop?eonBox.open("",function(){t()}):i||t())})}),e("img.sp_tt").on("click",function(t){t.preventDefault(),t.stopPropagation();var n=e(this);void 0!==n.data("sptlink")&&e.get(n.data("sptlink"),{},function(t){var n=void 0!==t.errors,i=void 0!==t.links;if(n&&o(t.errors),i)return void e.each(t.links,function(e,t){window.open(t)})})}),e("#panel-info-off").on("click",function(t){t.preventDefault(),t.stopPropagation();var n=staob.urls.panelInfoOff;e.get(n,{},function(t){void 0!==t.errors?o(t.errors):e("#panel-info").slideUp(200)},"JSON")}),e("#cid-resync").on("click",function(n){n.preventDefault(),n.stopPropagation();var i=staob.debug.urls.cidResync;e.get(i,{},function(e){void 0!==e.errors?o(e.errors):t()},"JSON")}),e("#debug-log-enable").on("click",function(n){var i=this.checked?1:0,a=staob.debug.urls.logSet;e.get(a,{checked:i},function(n){void 0!==n.errors?o(n.errors):i?t():e("#panel-debug").slideUp(200)},"JSON")}),!e.isEmptyObject(staob.debug.log)){var v=staob.debug.log,h=e('li[id^="dli-"]'),g=e("#iQxml"),k=e("#iRxml"),x=e("#iMsg");h.on("click",function(){var t=e(this),o=parseInt(this.id.replace("dli-",""),10),i=v[o];h.removeClass("active"),t.addClass("active"),e("#iReq").text("Request "+i.type+": "+i.name),e("#iUrl").text(i.url),e("#iHeader").text(i.header),i.qx?(g.text(""),e("<a>",{text:"xml",title:"View XML",href:"#",click:function(){return n(o,1),!1}}).appendTo(g)):g.html("-"),e("#iRes").text("Response: "+i.rms+" ms"),void 0!==i.ecode?(k.addClass("dbg-error").text("Exception ("+i.ecode+"):"),x.text(i.emsg)):(k.removeClass("dbg-error").text(""),x.text(""),i.rx?e("<a>",{text:"xml",title:"View XML",href:"#",click:function(){return n(o,0),!1}}).appendTo(k):x.html("ok")),e("div.dbg-info").show()})}var m=e('input[name="order_bpostBox[]"]');if(staob.ps_version<1.6&&(e("p#bulky").toggle(!1),m.change(function(){some_checked=!1,m.each(function(){some_checked=some_checked||this.checked}),e("p#bulky").toggle(some_checked)}),e('input[name="checkme"]').change(function(){e("p#bulky").toggle(this.checked)})),m.prop("checked",!1),staob.print.errors.length&&o(staob.print.errors),staob.print.labels.length)return eonBox.reset(),e.each(staob.print.labels,function(e,t){staob.fancy_pop?eonBox.addLink(t):window.open(t)}),void eonBox.open("",function(){t()})})}(jQuery);