/**
 * eon.jquery.settings.min.js ~ Version 1.65.2
 * @author    Serge Jamasb
 * @copyright the author
 * @license  MIT/GPL
 */
!function(e,t){"undefined"!=typeof sas&&e(function(){function t(t){var n=e('[data-id="1-330"]'),a=n.closest("td").next("td").find("input.currency"),i=e('[data-id="1-350"]'),o=i.closest("td").next("td").find("input.currency");t&&(n.prop("checked")||n.trigger("click"),i.prop("checked")||i.trigger("click"),a.val(0).trigger("change"),o.val(0).trigger("change")),n.prop("disabled",t),a.prop("disabled",t),i.prop("disabled",t),o.prop("disabled",t)}function n(t,n){var a=t.next("sup"),i=e("<span>");n.prop("disabled",!0),a.addClass("super-sup"),i.text(t.data("invalid")).addClass("hammered"),a.after(i);for(var o=0;o<2;o++)t.fadeOut("slow").fadeIn("slow");setTimeout(function(){a.removeClass("super-sup"),e("span.hammered").remove(),n.prop("disabled",!1)},parseInt(2e3))}function a(){var e=0;return v.each(function(){if(this.checked)return void e++}),0==e}function i(){a()&&v.each(function(){var t=e(this),n=this.value;t.prop("checked",sas.defOrderStates.includes(n))})}function o(t){e("span#tracie").html(t)}function s(t){var n=e(b),a=n.attr("src");n.attr("src",a.replace(t?".gif":"-load.gif",t?"-load.gif":".gif"))}function c(){o(""),s(!0),e.ajax({type:"GET",url:sas.urls.enabledCountries,data:{},contentType:"application/json; charset=utf-8",dataType:"json"}).success(function(t){t.Error?o(t.Error):e.each(["intl","ppi"],function(n,a){var i="",o=t.countries[a];e.isEmptyObject(o)||e.each(o,function(e,t){i+='<option value="'+e+'">'+t+"</option>"}),e("#"+a+"-list").html(i)}),s(!1)}).error(function(e){o(sas.contentText.errors.retrieveList),s(!1)})}e("input#num-dates").integerInput({min:2,max:7}),e("input#ship-delay").integerInput({min:0,max:8}),e("input#cutoff-time").hourInput({def:sas.def_cutoff}),e("input.del-opt").deliveryOption(sas.delopt_args),e('button[name="submitDeliveryOptions"]').on("click",function(){var t={1:{},2:{},4:{},9:{},10:{}};e("input.del-opt").each(function(){if(this.checked){var n=e(this),a=n.attr("from"),i=n.data("id").split("-");if(2===i.length){var o=i[0],s=i[1];t[o][s]=n.attr("cost")?[a,n.attr("cost")]:a}}}),$jsn_list=JSON.stringify(t),e('input[name="delivery_options_list"]').val($jsn_list)});var r=e('button[name="submitAccountSettings"]');e('input[name="home_24h_business"]').on("click",function(){t(parseInt(this.value))}),t(sas.home24hBusiness),function(){var t=e("div.module_confirmation.confirm");t.length&&setTimeout(function(){t.slideUp(250)},parseInt(3e3))}(),r.on("click",function(t){var a={};e("[data-sdkey]").each(function(){var i=e(this),o=i.data("sdkey"),s=i.prop("required"),c=i.data("pattern"),d=i.val().trim(),u=!1;if(c&&d.length&&(u=!new RegExp(c).test(d)),s&&(""==d||u))return t.preventDefault(),n(i,r),!1;a[o]=d}),$jsn_list=JSON.stringify(a),e('input[name="store_details"]').val($jsn_list)});var d={style:{classes:"qtip-bootstrap"},content:{text:""}},u=e.extend(!0,{},d);d.content.text=sas.contentText.tipFrom,u.content.text=sas.contentText.tipCost,e('[data-tip="from"]').qtip(d),e('[data-tip="cost"]').qtip(u),e("#del-set-deps").toggle(e('input[name="display_delivery_date"]').prop("checked")),e('input[name="display_delivery_date"]').on("change",function(){e("#del-set-deps").toggle(this.value)}),e("#choose-date-deps").toggle(e('input[name="choose_delivery_date"]').prop("checked")),e('input[name="choose_delivery_date"]').on("change",function(){e("#choose-date-deps").toggle(this.value)}),e('button[name="submitDeliverySettings"]').on("click",function(){elm_hour=e("input#cutoff-time"),elm_hour.val(elm_hour.val().replace(/:/g,""))});var l=sas.lastTab;e(".bpost-tabs").idTabs({start:l}),e('button[type="submit"]').on("click",function(){var t=e("ul.bpost-tabs li a.selected").parent().index(),n=e('<input type="hidden">').attr("name","last_set_tab").val(t);e(this).before(n)});var p=e('input[name="label_use_ps_labels"]');e("#label-deps").toggle(p.prop("checked")),p.on("change",function(){var t=this.value;e("#label-deps").toggle(t),setTimeout(function(){t&&i()},400)}),e("input#order-display-days").integerInput(sas.daysDisplayedLimits);var f=e('button[name="submitLabelSettings"]'),h=e("#treated_order_state"),v=e('input[name="do_states[]"]'),m=e('input[name="display_order_states"]'),g=e("#dos-desc-block");i(),v.on("change",function(t){var n=e(this),i=this.value,o=h.val();if(!this.checked&&i==o)return n.prop("checked",!0),!1;a()&&p[1].click()}),h.on("change",function(){var t=this.value;v.each(function(){var n=e(this);this.checked||t!=this.value||n.prop("checked",!0)})}),f.on("click",function(e){var t=[];if(v.each(function(){this.checked&&t.push(this.value)}),0==t.length)return e.preventDefault(),n(g,f),!1;m.val(t.join(","))});var b="img#get_countries";e(document).on("click",b,function(){c()});var _=e('input[name="intl_ead"]'),y=_.val(),k=["hscode","origin"],x={enabled:e('input[name="ead_enabled"]')},I={},j=""==y?I:e.parseJSON(y);e.each(k,function(t,n){x[n]={optFeature:e('input[name="'+n+'_opt_feature"'),feature:e('select[name="'+n+'_select_feature"]'),code:e("#"+n+"_common_code")},I[n]={opt:1,index:x[n].feature[0].length-2+t,id:0,code:0==t?"9999":"BE"},e.isEmptyObject(j[n])&&(j[n]={id:I[n].id,code:I[n].code}),x[n].optFeature.on("change",function(){var e=1==this.value,t=x[n];t.feature.prop("disabled",!e),t.code.prop("disabled",e)}),x[n].feature.on("change",function(){var e=this.selectedIndex,n=t?0:1,a=k[n],i=x[a].feature[0];e==i.selectedIndex&&(i.selectedIndex=(e+1)%i.length)});var a=x[n],i=a.optFeature.filter('[value="'+(j[n].id>0?1:0)+'"]');j[n].id?a.feature.val(j[n].id):a.feature[0].selectedIndex=I[n].index,a.code.val(j[n].code),i.trigger("click")}),x.hscode.code.genInput({reTest:/^\d{4,9}$/,def:I.hscode.code,ini:j.hscode.code}),e("#ead-deps").toggle(x.enabled.prop("checked")),x.enabled.on("change",function(){var t=this.value;e("#ead-deps").toggle(t)});var O=e('button[name="submitIntlSettings"]'),T=e('input[name="intl_countries"]');O.on("click",function(t){var n={};e.each(["intl","ppi"],function(t,a){var i=Math.pow(2,t),o=[],s=sas.intlEnabled[a];e.isEmptyObject(s)||e.each(s,function(e,t){o.push(e)}),n[i]=o});var a=JSON.stringify(n);T.val(a),a="",x.enabled.prop("checked")&&(e.each(k,function(e,t){var n=x[t],a=j[t];n.optFeature.prop("checked")?(a.id=n.feature.val(),a.code=n.code.val()):(a.id=0,a.code=n.code.val())}),a=JSON.stringify(j)),_.val(a)})})}(jQuery);