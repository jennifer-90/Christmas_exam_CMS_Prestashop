{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./_dev/js/front/checkout/checkout-17.js","webpack:///./_dev/js/front/checkout/checkout.js","webpack:///./_dev/js/mondialrelay_widget.js"],"names":["selectedCarrierExtraContent","flagPaymentStepNeedsRefresh","isPaymentStepReachable","setSelectedCarrierExtraContent","$","closest","next","on","removeAttr","setProcessLocked","lock","removeClass","attr","addClass","fixPrepareMondialRelay","id_carrier","document","ready","MONDIALRELAY_CARRIER_METHODS","length","Object","keys","appendTo","MR","init","ColLivMod","hasClass","savedRelay","show","summary_container","hide","widget_container","ev","preventDefault","stopPropagation","initOrUpdate","alert","MONDIALRELAY_NO_SELECTION_ERROR","prestashop","initialized","MONDIALRELAY_SELECTED_RELAY_IDENTIFIER","resetSelectedRelay","resetSavedRelay","append","clone","remove","target","is","selected_relay_input","widget_current_params","oldDeliveryMode","newDeliveryMode","off","window","mondialrelayWidget","widget","MR_Widget","isRelayCarrierSelected","MONDIALRELAY_NATIVE_RELAY_CARRIERS_IDS","indexOf","getSelectedCarrierId","id","val","new_id","split","getCarrierDeliveryMode","save_button","displayErrors","empty","addLoader","trigger","params","ajax","action","mondialrelay_selectedRelay","type","url","MONDIALRELAY_AJAX_CHECKOUT_URL","data","dataType","success","response","error","status","html","content","relaySummary","save_container","slideUp","removeLoader","MONDIALRELAY_SAVE_RELAY_ERROR","loadJs","callback","script","createElement","onload","src","head","appendChild","load","loaded","MONDIALRELAY_BAD_CONFIGURATION","slideDown","defaultParams","Target","Brand","MONDIALRELAY_ENSEIGNE","Country","MONDIALRELAY_COUNTRY_ISO","PostCode","MONDIALRELAY_POSTCODE","ShowResultsOnMap","MONDIALRELAY_DISPLAY_MAP","NbResults","Responsive","OnParcelShopSelected","relayData","setSelectedRelay","extend","MR_ParcelShopPicker","update","doSearch","relayIdentifier","oldRelay","hideWidget","zipcode","country_iso","searchCriteria","widget_search_zipcode_input","widget_search_country_input","messages","box","error_container","stop","children","fadeOut","queue","errors","each","k","m","push","text","dequeue","fadeIn","container","change_button"],"mappings":"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","file":"js/front/checkout/checkout-17.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./_dev/js/front/checkout/checkout-17.js\");\n","/**\n * NOTICE OF LICENSE\n *\n * @author    202 ecommerce <tech@202-ecommerce.com>\n * @author    Mondial Relay\n * @copyright Copyright (c) Mondial Relay\n * @license http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\n\n/**\n * Javascript for PS 1.7\n */\n\n// modules ES6\nimport * as MR from './checkout';\n\n// The container of the whole \"mondialrelay_content\", as the original one is\n// badly placed\nlet selectedCarrierExtraContent = null;\n\n// This will track if the page should be refreshed when changing carrier, as\n// other carriers may depend on it\nlet flagPaymentStepNeedsRefresh = null;\n\n// This will track if the payment step should be reachable using the link or not\nlet isPaymentStepReachable = null;\n\nconst setSelectedCarrierExtraContent = () => {\n  selectedCarrierExtraContent = $('[name^=\"delivery_option\"]:checked')\n      .closest('.delivery-option')\n      .next('.carrier-extra-content');\n  return selectedCarrierExtraContent;\n};\n\n$(\"#mondialrelay_save-relay\").on(\"click\", function () {\n  $('button.continue[name=\"confirmDeliveryOption\"]').removeAttr(\"disabled\");\n});\n\nconst setProcessLocked = (lock) => {\n  if (lock) {\n    // Delivery step is not complete\n    $(\"#checkout-delivery-step\").removeClass('-complete');\n    // Disable submit delivery button\n    $(\"button[name='confirmDeliveryOption']\").attr('disabled', true);\n  } else {\n    // Delivery step is not complete\n    $(\"#checkout-delivery-step\").addClass('-complete');\n    // Enable submit delivery button\n    $(\"button[name='confirmDeliveryOption']\").attr('disabled', false);\n  }\n};\n\nconst fixPrepareMondialRelay = (id_carrier) => {\n  selectedCarrierExtraContent = $('#delivery_option_' + id_carrier)\n      .closest('.delivery-option')\n      .next('.carrier-extra-content');\n  return selectedCarrierExtraContent;\n};\n$(document).ready(function() {\n  if (MONDIALRELAY_CARRIER_METHODS.length > 0) {\n    fixPrepareMondialRelay(MONDIALRELAY_CARRIER_METHODS[Object.keys(MONDIALRELAY_CARRIER_METHODS)[0]].id_carrier);\n    $('#mondialrelay_content').appendTo(selectedCarrierExtraContent);\n    MR.widget.init({\n      ColLivMod: MR.getCarrierDeliveryMode(MONDIALRELAY_CARRIER_METHODS[Object.keys(MONDIALRELAY_CARRIER_METHODS)[0]].id_carrier)\n    });\n  }\n})\n\n$(MR.widget).on('mondialrelay.ready', function() {\n  if (MR.isRelayCarrierSelected()) {\n    setSelectedCarrierExtraContent();\n\n    // \"Payment\" step is not reachable using the link; save the previous state to\n    // restore it if carrier changes. The user MUST click the form button,\n    // otherwise the validation hook won't be triggered.\n    if (isPaymentStepReachable === null) {\n      isPaymentStepReachable = $(\"#checkout-payment-step\").hasClass('-reachable');\n    }\n    $(\"#checkout-payment-step\").removeClass('-reachable').addClass('-unreachable');\n\n    $(\"#mondialrelay_content\").appendTo(selectedCarrierExtraContent);\n    if (!MR.widget.savedRelay) {\n      setProcessLocked(true);\n      MR.widget.show();\n    } else {\n      $(MR.widget.summary_container).show();\n      MR.widget.hide();\n      if ($(\"#checkout-payment-step\").hasClass('-unreachable')) {\n        $(\"#checkout-payment-step\").removeClass('-unreachable').addClass('-reachable');\n      }\n    }\n    MR.widget.init({ ColLivMod: MR.getCarrierDeliveryMode(MR.getSelectedCarrierId()) });\n  }\n\n  // Click events sometimes mess with PrestaShop's checkout process, so catch\n  // them and silence them\n  $(MR.widget.widget_container).on('click', function(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  });\n});\n\n// We can't submit the form if no relay was selected\n$(document).on('submit', '#js-delivery', function(ev) {\n  if (MR.isRelayCarrierSelected() && !MR.widget.savedRelay) {\n    ev.preventDefault();\n    ev.stopPropagation();\n\n    setSelectedCarrierExtraContent();\n    $(\"#mondialrelay_content\").appendTo(selectedCarrierExtraContent);\n    MR.widget.initOrUpdate({ ColLivMod: MR.getCarrierDeliveryMode(MR.getSelectedCarrierId()) });\n\n    alert(MONDIALRELAY_NO_SELECTION_ERROR);\n    return false;\n  }\n\n  return true;\n});\n\nprestashop.on('updatedDeliveryForm', function() {\n  // The content was refreshed, so the widget is no longer there\n  MR.widget.initialized = false;\n  // Get latest data\n  MR.widget.savedRelay = MONDIALRELAY_SELECTED_RELAY_IDENTIFIER;\n});\n\n// We must check this event if Mondial Relay is selected, otherwise the\n// form is reloaded immediately, and we can't check if a relay was selected; our\n// PS 1.7.2+ hook is never triggered as it requires the form to be submitted\n// with the submit button, not just when a carrier changes or a relay is\n// selected.\n$('#js-delivery').on('change', '[name^=\"delivery_option\"]', function(ev) {\n\n  // If another carrier than Mondial Relay is selected\n  if (!MR.isRelayCarrierSelected()) {\n    // Hide our extraContent, and set it to null\n    if (selectedCarrierExtraContent) {\n      selectedCarrierExtraContent.hide();\n      selectedCarrierExtraContent = null;\n    }\n    setProcessLocked(false);\n\n    MR.widget.resetSelectedRelay();\n    MR.widget.resetSavedRelay(true);\n\n    if (flagPaymentStepNeedsRefresh) {\n      // Some carriers may depend on the page refresh\n      $(\"#checkout-payment-step .content\").append(flagPaymentStepNeedsRefresh);\n      flagPaymentStepNeedsRefresh = null;\n    }\n    if (isPaymentStepReachable !== null && isPaymentStepReachable) {\n      // \"Payment\" step is reachable\n      $(\"#checkout-payment-step\").addClass('-reachable').removeClass('-unreachable');\n    }\n    return;\n  }\n\n  if (!MR.widget.initialized) {\n    MR.widget.init({\n      ColLivMod: MR.getCarrierDeliveryMode(MONDIALRELAY_CARRIER_METHODS[Object.keys(MONDIALRELAY_CARRIER_METHODS)[0]].id_carrier)\n    });\n  }\n\n  // We let this event propagate. If no relay is selected, we'll see an alert or\n  // a php error and we'll stay on delivery step.\n  /*ev.preventDefault();\n  ev.stopPropagation();*/\n\n  // We never want a page refresh when using a carrier requiring a relay; the\n  // user MUST click the form button, otherwise the validation hook won't be\n  // triggered\n  flagPaymentStepNeedsRefresh = $('.js-cart-payment-step-refresh').clone();\n  $('.js-cart-payment-step-refresh').remove();\n\n  // \"Payment\" step is not reachable using the link; save the previous state to\n  // restore it if carrier changes\n  if (isPaymentStepReachable === null) {\n    isPaymentStepReachable = $(\"#checkout-payment-step\").hasClass('-reachable');\n  }\n  $(\"#checkout-payment-step\").removeClass('-reachable').addClass('-unreachable');\n\n  // We can't go further if we haven't selected a relay\n  if (!MR.widget.savedRelay) {\n    setProcessLocked(true);\n    MR.widget.show();\n  } else if (!$(ev.target).is(MR.widget.selected_relay_input)) {\n    // If we DO have a selected relay, then we're reselecting a carrier\n    // The delivery_mode may be different though\n    MR.widget.hide();\n  }\n\n  // If we switched from a Mondial Relay carrier to another, hide the previous\n  // extraContent\n  if (selectedCarrierExtraContent) {\n    selectedCarrierExtraContent.hide();\n  }\n\n  // If we changed delivery mode, then our current relay selection is invalid\n  if (MR.widget.widget_current_params != null) {\n    let oldDeliveryMode = MR.widget.widget_current_params.ColLivMod;\n    let newDeliveryMode = MR.getCarrierDeliveryMode(MR.getSelectedCarrierId());\n    if (oldDeliveryMode != newDeliveryMode) {\n      MR.widget.resetSelectedRelay();\n      MR.widget.resetSavedRelay();\n    }\n  }\n\n  // Show the new extraContent, and update the widget\n  setSelectedCarrierExtraContent();\n  $(\"#mondialrelay_content\").appendTo(selectedCarrierExtraContent);\n  MR.widget.initOrUpdate({ColLivMod: MR.getCarrierDeliveryMode(MR.getSelectedCarrierId())});\n});\n\n// When selecting a PR in the list from the widget\n$('#js-delivery').on('change', '#mondialrelay_content *', function(ev) {\n  // If we selected a Mondial Relay carrier, we MUST NOT let that event\n  // propagate, or a form reload may be triggered even though we haven't\n  // selected a relay\n  ev.preventDefault();\n  ev.stopPropagation();\n});\n\n$(MR.widget).on('mondialrelay.saveSelectedRelay.before', function() {\n  setProcessLocked(true);\n  // Disable delivery options change, to prevent concurrent AJAX requests\n  $(\"[name^='delivery_option']\")\n      .attr('readonly', true)\n      .on('click.mondialrelay.lock', function(ev) {\n        ev.preventDefault();\n        ev.stopPropagation();\n      });\n});\n\n$(MR.widget).on('mondialrelay.saveSelectedRelay.success', function() {\n  setProcessLocked(false);\n  // Enable delivery options change\n  $(\"[name^='delivery_option']\")\n      .attr('readonly', false)\n      .off('click.mondialrelay.lock');\n});\n\n$(MR.widget).on('mondialrelay.saveSelectedRelay.error', function() {\n  setProcessLocked(true);\n  // Enable delivery options change\n  $(\"[name^='delivery_option']\")\n      .attr('readonly', false)\n      .off('click.mondialrelay.lock');\n});\n\nwindow.mondialrelayWidget = MR.widget;\n","/**\n * NOTICE OF LICENSE\n *\n * @author    202 ecommerce <tech@202-ecommerce.com>\n * @author    Mondial Relay\n * @copyright Copyright (c) Mondial Relay\n * @license http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\n\n// modules ES6\nimport * as MR_Widget from '../../mondialrelay_widget';\n\nconst widget = MR_Widget.widget;\n\nconst isRelayCarrierSelected = () => {\n  return -1 != MONDIALRELAY_NATIVE_RELAY_CARRIERS_IDS.indexOf(getSelectedCarrierId());\n};\n\nconst getSelectedCarrierId = () => {\n  let id = $('[name^=\"delivery_option\"]:checked').val();\n  if (typeof id !== 'undefined') {\n      let new_id = id.split(',');\n      id = new_id[0];\n  }\n  return id ? id : false;\n};\n\nconst getCarrierDeliveryMode = (id_carrier) => {\n  return MONDIALRELAY_CARRIER_METHODS[id_carrier]['delivery_mode'];\n};\n\n$(document).on('click', widget.save_button, function(ev) {\n  ev.preventDefault();\n  ev.stopPropagation();\n\n  widget.displayErrors(null);\n  $(widget.summary_container).empty().show();\n  widget.addLoader(widget.summary_container);\n\n  $(widget).trigger('mondialrelay.saveSelectedRelay.before');\n\n  let params = {\n    ajax: true,\n    action: 'saveSelectedRelay',\n    mondialrelay_selectedRelay: MONDIALRELAY_SELECTED_RELAY_IDENTIFIER ? MONDIALRELAY_SELECTED_RELAY_IDENTIFIER : 0,\n    id_carrier: getSelectedCarrierId(),\n  };\n\n  $.ajax(\n  {\n    type : 'POST',\n    url: MONDIALRELAY_AJAX_CHECKOUT_URL,\n    data : params,\n    dataType: 'json',\n    success: function(response) {\n      if (!response) {\n        this.error(response);\n        return;\n      }\n\n      if (response.status == 'ok') {\n        widget.savedRelay = MONDIALRELAY_SELECTED_RELAY_IDENTIFIER;\n        $(widget.summary_container)\n          .html(response.content.relaySummary);\n        widget.hide();\n        $(widget.save_container).hide();\n        $(widget.widget_container).slideUp();\n        $(widget.save_container).slideUp();\n      } else {\n        widget.savedRelay = null;\n        if (response.error.length) {\n          widget.displayErrors(response.error);\n        }\n        widget.removeLoader($(widget.summary_container));\n        $(widget).trigger('mondialrelay.saveSelectedRelay.error');\n        return;\n      }\n\n      $(widget).trigger('mondialrelay.saveSelectedRelay.success');\n    },\n    error: function(response) {\n      widget.savedRelay = null;\n      alert(MONDIALRELAY_SAVE_RELAY_ERROR);\n      $(widget).trigger('mondialrelay.saveSelectedRelay.error');\n      widget.removeLoader($(widget.summary_container));\n    }\n  });\n\n  return false;\n});\n\nexport {\n  isRelayCarrierSelected,\n  getSelectedCarrierId,\n  getCarrierDeliveryMode,\n  widget,\n};\n","/**\n * NOTICE OF LICENSE\n *\n * @author    202 ecommerce <tech@202-ecommerce.com>\n * @author    Mondial Relay\n * @copyright Copyright (c) Mondial Relay\n * @license http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\n\nconst widget = {\n  'url': '//widget.mondialrelay.com/parcelshop-picker/jquery.plugin.mondialrelay.parcelshoppicker.min.js',\n  'loaded': false,\n  'initialized': false,\n  'widget_container': '#mondialrelay_widget',\n  'save_container': '#mondialrelay_save-container',\n  'error_container': '#mondialrelay_errors',\n  'summary_container': '#mondialrelay_summary',\n  'save_button': '#mondialrelay_save-relay',\n  'change_button': '#mondialrelay_change-relay',\n  'selected_relay_input': '#mondialrelay_selected-relay',\n  'widget_search_zipcode_input': '#mondialrelay_widget .MRW-Search .Arg2',\n  'widget_search_country_input': '#mondialrelay_widget .MRW-Search .Arg1',\n  'savedRelay': null,\n  // This is basically read-only; it's used to check the widget's current state\n  'widget_current_params': null,\n};\n\nconst loadJs = (url, callback) => {\n  var script = document.createElement('script');\n  script.onload = callback;\n  script.src = url;\n  \n  document.head.appendChild(script);\n};\n\nwidget.load = (callback) => {\n  loadJs(widget.url, function() {\n    widget.loaded = true;\n    callback();\n  });\n};\n\nwidget.init = (params) => {\n  \n  // Access to the page may be completely blocked if the configuration isn't\n  // done, so this variable may not always be defined.\n  if (\n    typeof MONDIALRELAY_BAD_CONFIGURATION != 'undefined'\n    && MONDIALRELAY_BAD_CONFIGURATION\n  ) {\n    return;\n  }\n  \n  if (widget.savedRelay) {\n    $(widget.summary_container).slideDown();\n  }\n  \n  if (!widget.loaded) {\n    widget.addLoader(widget.widget_container);\n    widget.load(function() {\n      // No need to remove the loader; it will be replaced by the\n      // widget's content\n      widget.init(params);\n    });\n    return;\n  }\n  \n  let defaultParams = {\n    // Where to store the selected relay's ID\n    Target: widget.selected_relay_input,\n    Brand: MONDIALRELAY_ENSEIGNE,\n    // iso code, 2 letters\n    Country: MONDIALRELAY_COUNTRY_ISO,\n    // Postcode for default search\n    PostCode: MONDIALRELAY_POSTCODE,\n    // Delivery mode; carrier dependent (Standard [24R], XL [24L], XXL [24X], Drive [DRI])\n    // Here for information, but don't set a default value; we should always set\n    // one directly\n    // ColLivMod: '24R',\n    // Wether to display the relays on a map or as a list\n    ShowResultsOnMap: MONDIALRELAY_DISPLAY_MAP == true,\n    // Nombre de Point Relais Ã  afficher\n    NbResults: \"7\",\n    Responsive: true,\n    OnParcelShopSelected: function(relayData) {\n      $(widget.save_container).show();\n      widget.setSelectedRelay(null, relayData);\n    }\n  };\n  \n  if (params) {\n    $.extend(defaultParams, params);\n  }\n\n  widget.widget_current_params = defaultParams;\n  $(widget.widget_container).MR_ParcelShopPicker(defaultParams);\n  widget.initialized = true;\n};\n\nwidget.show = () => {\n  $(widget.widget_container).show();\n};\n\nwidget.hide = () => {\n  $(widget.widget_container).hide();\n};\n\nwidget.update = (params) => {\n  $(widget.widget_container).trigger(\"MR_SetParams\", params);\n  widget.widget_current_params = $.extend(widget.widget_current_params, params);\n  widget.doSearch();\n};\n\nwidget.initOrUpdate = (params) => {\n  if (widget.initialized) {\n    widget.update(params);\n  } else {\n    widget.init(params);\n  }\n};\n\nwidget.setSelectedRelay = (relayIdentifier, relayData) => {\n  if (typeof relayIdentifier == 'undefined' || !relayIdentifier) {\n    relayIdentifier = $(widget.selected_relay_input).val();\n  }\n  \n  if (relayIdentifier != $(widget.selected_relay_input).val()) {\n    // @TODO : select relay on map... if we can\n    return;\n  }\n  \n  // This can happen sometimes; we don't want to trigger a change if the value\n  // didn't actually change\n  if (MONDIALRELAY_SELECTED_RELAY_IDENTIFIER != relayIdentifier) {\n    let oldRelay = MONDIALRELAY_SELECTED_RELAY_IDENTIFIER;\n    MONDIALRELAY_SELECTED_RELAY_IDENTIFIER = relayIdentifier;\n    $(widget).trigger('mondialrelay.selectedRelay', {oldRelay: oldRelay, relayData: relayData});\n  }\n};\n\nwidget.resetSelectedRelay = () => {\n    let oldRelay = MONDIALRELAY_SELECTED_RELAY_IDENTIFIER;\n    MONDIALRELAY_SELECTED_RELAY_IDENTIFIER = null;\n    $(widget).trigger('mondialrelay.selectedRelay', {oldRelay: oldRelay, relayData: null});\n};\n\nwidget.resetSavedRelay = (hideWidget) => {\n    widget.savedRelay = null;\n    \n    if (typeof hideWidget === 'undefined' || !hideWidget) {\n      $(widget.summary_container).slideUp();\n      $(widget.widget_container).slideDown();\n      $(widget.save_container).slideDown();\n    }\n};\n\nwidget.doSearch = (zipcode, country_iso) => {\n  let searchCriteria = [\n    typeof zipcode !== 'undefined' && zipcode ?  zipcode : $(widget.widget_search_zipcode_input).val(),\n    typeof country_iso !== 'undefined' && country_iso ?  country_iso : $(widget.widget_search_country_input).val(),\n  ];\n  $(widget.widget_container).trigger('MR_DoSearch', searchCriteria);\n};\n\nwidget.displayErrors = (messages) => {\n  let box = $(widget.error_container);\n  if (box.length == 0) {\n    return;\n  }\n  \n  box.stop(true);\n  \n  if (box.children().length) {\n    box.fadeOut(function() {\n      $(this).empty();\n    });\n  }\n  \n  if (typeof messages == 'undefined' || !messages) {\n    return;\n  }\n  \n  // Either the queue is already going with .fadeOut(), either it will be\n  // launched by .fadeIn()\n  box.queue(function() {\n    \n    let errors = [];\n    $.each(messages, function(k, m) {\n      errors.push($(\"<div/>\").addClass(\"alert alert-danger\").text(m));\n    });\n    \n    $(this).append(errors);\n    $(this).dequeue();\n  });\n  box.fadeIn();\n};\n\nwidget.addLoader = (container) => {\n  if ($(container).length == 0) {\n    return;\n  }\n  \n  if ($(container).children('.mondialrelay_loader').length > 0) {\n    return;\n  }\n  \n  $(\"#mondialrelay_loader-template\")\n    .clone()\n    .attr('id', null)\n    .show()\n    .appendTo(container);\n};\n\nwidget.removeLoader = (container) => {\n  $(container).children('.mondialrelay_loader').remove();\n};\n\n$(document).ready(function() {\n  widget.savedRelay = MONDIALRELAY_SELECTED_RELAY_IDENTIFIER;\n  $(widget).trigger('mondialrelay.ready');\n});\n\n$(document).on('click', widget.change_button, function(ev) {\n  widget.show();\n});\n\n$(document).on('click', '.MRW-ShowList', function(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n});\n\n// Selecting a city from the autocomplete list may trigger things\n$(document).on('click', '.PR-City', function(ev) {\n  ev.preventDefault();\n  ev.stopPropagation();\n});\n\nexport { widget };"],"sourceRoot":""}